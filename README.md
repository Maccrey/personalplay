# PersonaPlay (í¼ì†Œë‚˜í”Œë ˆì´)

ì¬ë¯¸ìˆê³  ì¤‘ë…ì„± ìˆëŠ” ê°œì¸ ì„±í–¥ í…ŒìŠ¤íŠ¸ í”Œë«í¼

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

PersonaPlayëŠ” 10~30ëŒ€ íƒ€ê²Ÿì˜ SNS ê³µìœ  ì¤‘ì‹¬ ì„±í–¥ í…ŒìŠ¤íŠ¸ í”Œë«í¼ì…ë‹ˆë‹¤. MBTI, ë°ˆ, íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ ì¬ë¯¸ìˆëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ìì‹ ì˜ ìºë¦­í„°ë¥¼ ë°œê²¬í•˜ê³  ê²°ê³¼ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•

- ğŸ¯ **10ê°œì˜ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸** - ì—°ì• , ì¹œêµ¬, ì§ì¥, MBTI ë™ë¬¼, SNS ì¤‘ë…ë„ ë“±
- ğŸ“± **ëª¨ë°”ì¼ ìµœì í™”** - 8-12ê°œ ë¬¸í•­ìœ¼ë¡œ ë¹ ë¥¸ ì°¸ì—¬
- ğŸ¨ **SNS ê³µìœ  ìµœì í™”** - OG íƒœê·¸ ë° ì´ë¯¸ì§€ ìë™ ìƒì„±
- ğŸ’° **AdSense ì¤€ë¹„ ì™„ë£Œ** - 4ê°œ ê´‘ê³  ìŠ¬ë¡¯ êµ¬ì¡°í™”
- ğŸ”¬ **A/B í…ŒìŠ¤íŠ¸** - ê´‘ê³  ë ˆì´ì•„ì›ƒ ì‹¤í—˜ ê°€ëŠ¥
- ğŸ”’ **GDPR/CCPA ì¤€ìˆ˜** - ì¿ í‚¤ ë™ì˜ ê´€ë¦¬
- ğŸ“Š **Analytics** - ì‚¬ìš©ì í–‰ë™ ì¶”ì  ë° í†µê³„

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Node.js 16.x ì´ìƒ
- npm ë˜ëŠ” yarn

### ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd myself-test

# ì˜ì¡´ì„± ì„¤ì¹˜
cd web
npm install
```

### ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ [http://localhost:3000](http://localhost:3000) ì ‘ì†

### ë¹Œë“œ

```bash
npm run build
npm start
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
myself-test/
â”œâ”€â”€ web/                      # Next.js ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ tests.js      # í…ŒìŠ¤íŠ¸ ë°ì´í„° API
â”‚   â”‚   â”‚   â”œâ”€â”€ track.js      # Analytics API
â”‚   â”‚   â”‚   â””â”€â”€ og/[id].js    # OG ì´ë¯¸ì§€ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ test/[id].js      # í…ŒìŠ¤íŠ¸ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ result/[id].js    # ê²°ê³¼ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ index.js          # í™ˆí˜ì´ì§€
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ConsentBanner.js  # ì¿ í‚¤ ë™ì˜ ë°°ë„ˆ
â”‚   â”‚   â””â”€â”€ AdUnit.js         # ê´‘ê³  ìœ ë‹›
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ analytics.js      # Analytics ìœ í‹¸
â”‚   â”‚   â””â”€â”€ consent.js        # ë™ì˜ ê´€ë¦¬
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ tests.json        # 10ê°œ í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â””â”€â”€ jsconfig.json         # Path alias ì„¤ì •
â”œâ”€â”€ prd.md                    # í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ
â”œâ”€â”€ tasklist.md               # ê°œë°œ íƒœìŠ¤í¬ ëª©ë¡
â””â”€â”€ README.md                 # ì´ ë¬¸ì„œ
```

## ğŸ® ì‚¬ìš© ë°©ë²•

### 1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ê¸°

1. í™ˆí˜ì´ì§€ì—ì„œ ì›í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì„ íƒ
2. ê° ì§ˆë¬¸ì— 'ì˜ˆ' ë˜ëŠ” 'ì•„ë‹ˆì˜¤'ë¡œ ë‹µë³€
3. "ê²°ê³¼ ë³´ê¸°" ë²„íŠ¼ í´ë¦­
4. ê²°ê³¼ í™•ì¸ ë° SNS ê³µìœ 

### 2. ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ê¸°

`web/data/tests.json` íŒŒì¼ì— ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€:

```json
{
  "id": "11",
  "title": "ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì œëª©",
  "questions": [
    "ì²« ë²ˆì§¸ ì§ˆë¬¸?",
    "ë‘ ë²ˆì§¸ ì§ˆë¬¸?",
    "..."
  ],
  "results": [
    {
      "key": "A",
      "title": "ê²°ê³¼ íƒ€ì… A",
      "desc": "ê²°ê³¼ ì„¤ëª…"
    },
    {
      "key": "B",
      "title": "ê²°ê³¼ íƒ€ì… B",
      "desc": "ê²°ê³¼ ì„¤ëª…"
    }
  ]
}
```

### 3. A/B í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ê¸°

URLì— ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¶”ê°€:

- Variant A: `http://localhost:3000/result/1?r=A&ab=A`
- Variant B: `http://localhost:3000/result/1?r=A&ab=B`

Variant BëŠ” sticky ê´‘ê³ ê°€ ìˆ¨ê¹€ ì²˜ë¦¬ë©ë‹ˆë‹¤.

### 4. Analytics ë°ì´í„° í™•ì¸í•˜ê¸°

```bash
# ëª¨ë“  ì´ë²¤íŠ¸ ì¡°íšŒ
curl http://localhost:3000/api/track

# íŠ¹ì • ì´ë²¤íŠ¸ íƒ€ì…ë§Œ ì¡°íšŒ
curl http://localhost:3000/api/track?event_type=test_started

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ë§Œ ì¡°íšŒ
curl http://localhost:3000/api/track?test_id=1

# ìµœê·¼ 10ê°œ ì´ë²¤íŠ¸ë§Œ ì¡°íšŒ
curl http://localhost:3000/api/track?limit=10
```

## ğŸ“Š ì¶”ì ë˜ëŠ” ì´ë²¤íŠ¸

- `test_started` - í…ŒìŠ¤íŠ¸ ì‹œì‘
- `test_completed` - í…ŒìŠ¤íŠ¸ ì™„ë£Œ (ì ìˆ˜, ê²°ê³¼ í¬í•¨)
- `result_viewed` - ê²°ê³¼ í˜ì´ì§€ ì¡°íšŒ
- `result_shared` - ê³µìœ  ë²„íŠ¼ í´ë¦­
- `ab_experiment_view` - A/B í…ŒìŠ¤íŠ¸ ë…¸ì¶œ
- `consent_given` / `consent_denied` - ì¿ í‚¤ ë™ì˜ ìƒíƒœ

## ğŸ¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### OG ì´ë¯¸ì§€ ìˆ˜ì •

`web/pages/api/og/[id].js` íŒŒì¼ì—ì„œ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ ë³€ê²½ ê°€ëŠ¥

### ê´‘ê³  ìŠ¬ë¡¯ ìˆ˜ì •

`web/pages/result/[id].js`ì—ì„œ ê´‘ê³  ìœ„ì¹˜ ë° ê°œìˆ˜ ì¡°ì • ê°€ëŠ¥

### ìŠ¤íƒ€ì¼ ìˆ˜ì •

`web/pages/result/[id].module.css`ì—ì„œ ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ ë³€ê²½

## ğŸ§ª í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# Playwright ì„¤ì¹˜ (ìµœì´ˆ 1íšŒ)
npx playwright install

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run dev  # ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ì„œë²„ ì‹¤í–‰
npx playwright test --reporter=line
```

### í…ŒìŠ¤íŠ¸ëœ ê¸°ëŠ¥

- âœ… í…ŒìŠ¤íŠ¸ ì—”ì§„ (5ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
- âœ… OG meta & ê´‘ê³  ìŠ¬ë¡¯ (6ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
- âœ… A/B í…ŒìŠ¤íŠ¸ (7ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
- âœ… CMP ë™ì˜ ê´€ë¦¬ (7ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
- âœ… Analytics (7ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
- âœ… 10ê°œ ì½˜í…ì¸  (7ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)

**ì´ 39ê°œ E2E í…ŒìŠ¤íŠ¸ í†µê³¼ âœ…**

## ğŸ“¦ API ì—”ë“œí¬ì¸íŠ¸

### GET /api/tests

ëª¨ë“  í…ŒìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ

**Response:**
```json
{
  "tests": [
    {
      "id": "1",
      "title": "í…ŒìŠ¤íŠ¸ ì œëª©",
      "questions": ["ì§ˆë¬¸1", "ì§ˆë¬¸2"],
      "results": [{"key": "A", "title": "ê²°ê³¼", "desc": "ì„¤ëª…"}]
    }
  ]
}
```

### GET /api/track

Analytics ì´ë²¤íŠ¸ ì¡°íšŒ

**Query Parameters:**
- `event_type` - ì´ë²¤íŠ¸ íƒ€ì… í•„í„°
- `test_id` - í…ŒìŠ¤íŠ¸ ID í•„í„°
- `limit` - ê²°ê³¼ ê°œìˆ˜ ì œí•œ

**Response:**
```json
{
  "events": [...],
  "stats": {
    "total_events": 100,
    "event_types": {
      "test_started": 50,
      "test_completed": 40
    },
    "tests": {
      "1": 30,
      "2": 20
    }
  },
  "total": 100
}
```

### POST /api/track

ì´ë²¤íŠ¸ ì „ì†¡

**Request Body:**
```json
{
  "event": "custom_event",
  "test_id": "1",
  "custom_field": "value"
}
```

### GET /api/og/[id]

OG ì´ë¯¸ì§€ ìƒì„± (1200x630)

**Query Parameters:**
- `title` - ê²°ê³¼ ì œëª©
- `desc` - ê²°ê³¼ ì„¤ëª…

## ğŸ” ì¿ í‚¤ ë™ì˜ ê´€ë¦¬

- ì²« ë°©ë¬¸ ì‹œ ìë™ìœ¼ë¡œ ë™ì˜ ë°°ë„ˆ í‘œì‹œ
- `localStorage`ì— `pp_consent` í‚¤ë¡œ ì €ì¥
- ë™ì˜ ì‹œ: ê´‘ê³  í™œì„±í™”
- ê±°ë¶€ ì‹œ: "ê´‘ê³  ë™ì˜ í•„ìš”" ë©”ì‹œì§€ í‘œì‹œ

### ë™ì˜ ìƒíƒœ ê°•ì œ ì„¤ì • (ê°œë°œìš©)

ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ:

```javascript
// ë™ì˜
localStorage.setItem('pp_consent', JSON.stringify({ads: true}));

// ê±°ë¶€
localStorage.setItem('pp_consent', JSON.stringify({ads: false}));

// ì´ˆê¸°í™”
localStorage.removeItem('pp_consent');
```

## ğŸ’° AdSense ì—°ë™ (ì¤€ë¹„ ì™„ë£Œ)

### í˜„ì¬ ìƒíƒœ

- âœ… 4ê°œ ê´‘ê³  ìŠ¬ë¡¯ êµ¬ì¡°í™” ì™„ë£Œ
- âœ… TEST ëª¨ë“œë¡œ í”Œë ˆì´ìŠ¤í™€ë” ë°°ì¹˜
- âœ… ë™ì˜ ê´€ë¦¬ ì‹œìŠ¤í…œ ì™„ë¹„
- âœ… A/B í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ êµ¬ì¶•

### AdSense ì—°ë™ ë°©ë²•

1. `web/pages/result/[id].js`ì—ì„œ `data-ad-client` ê°’ì„ ì‹¤ì œ AdSense IDë¡œ ë³€ê²½
2. `data-ad-slot` ê°’ì„ ì‹¤ì œ ê´‘ê³  ìŠ¬ë¡¯ IDë¡œ ë³€ê²½
3. `data-test="true"` ì†ì„± ì œê±°
4. `<meta name="adtest" content="on" />` ì œê±°

### ê´‘ê³  ìŠ¬ë¡¯ ìœ„ì¹˜

- `top` - ê²°ê³¼ í˜ì´ì§€ ìƒë‹¨
- `in-article` - ê²°ê³¼ ì¹´ë“œ í•˜ë‹¨
- `bottom` - í˜ì´ì§€ í•˜ë‹¨
- `sticky` - í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ ê³ ì • (ëª¨ë°”ì¼ì—ì„œ ìˆ¨ê¹€)

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

- âœ… SSG (Static Site Generation) ì‚¬ìš©
- âœ… ì´ë¯¸ì§€ lazy loading ì¤€ë¹„
- âœ… ê´‘ê³  ìŠ¤í¬ë¦½íŠ¸ ì§€ì—° ë¡œë”©
- âœ… Next.js 14 ìµœì‹  ë²„ì „

## ğŸ› ë¬¸ì œ í•´ê²°

### í¬íŠ¸ ì¶©ëŒ ì‹œ

```bash
# ë‹¤ë¥¸ í¬íŠ¸ì—ì„œ ì‹¤í–‰
PORT=3001 npm run dev
```

### ë¹Œë“œ ì˜¤ë¥˜ ì‹œ

```bash
# ìºì‹œ ì‚­ì œ í›„ ì¬ë¹Œë“œ
rm -rf .next
npm run build
```

### í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ

```bash
# ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
curl http://localhost:3000/api/tests

# Playwright ì¬ì„¤ì¹˜
npx playwright install --force
```

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í•™ìŠµ ë° í¬íŠ¸í´ë¦¬ì˜¤ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆ ë° PRì€ ì–¸ì œë“  í™˜ì˜í•©ë‹ˆë‹¤!

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

---

**ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)**
